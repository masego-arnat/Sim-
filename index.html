<!DOCTYPE html>
<html lang="en">

<head>

    
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <meta name="description"
        content="Dial-A-Meal is Namibia's favourite take away delivery service  proudly delivering piping hot meals to your doorstep.">
    <meta name="keywords"
        content="food, takeaway, take away, order, delivery, pork, meat, fish, chicken, seafood, thai, chinese, burger, steak, pizza, dial, meal, dial a meal, restaurant">
    <meta name="author" content="" />
    <meta name="robots" content="index, follow">
    <title>Green Fc </title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
        integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">

    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
    <link href="css/New.css" rel="stylesheet" />
    <!--<link href="https://cdn.datatables.net/1.13.5/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.dataTables.min.css" rel="stylesheet" />-->
    <!--<link href="https://cdn.datatables.net/v/dt/dt-1.13.5/r-2.5.0/datatables.min.css" rel="stylesheet" />-->


    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/rowreorder/1.3.1/css/rowReorder.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.4.0/css/responsive.dataTables.min.css" />

    <link href="https://unpkg.com/slim-select@latest/dist/slimselect.css" rel="stylesheet">
    </link>
</head>

<body>
    <!-- Header-->
    <header class="bg-dark py-5  border-bottom mb-4">
        <div class="container " style="    padding-bottom: 12px;">
            <div class="text-center text-white ">
                <h1 class="display-4 fw-bolder text"
                    style="animation: 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0s 1 normal both running text-pop-up-top;">
                    Green FC Kit Records
                </h1>

                <!-- <p class="lead fw-normal text-white-50 mb-0">With this shop hompeage template</p> -->


            </div>
        </div>
    </header>


    <section class="bg-light pt-5 pb-5 shadow-sm">
        <div class="container">
            <div class="row ">


                <div class="col-12">

                    <table id="example" class="display resposive  display responsive nowrap" style="width:100%">
                        <thead>
                            <tr>
                                <th> Player Name </th>
                                <th> Player Name </th>
                                <th> Kit Details </th>

                                <th>Edit</th>
                                <th>Delete</th>
                            </tr>
                        </thead>
                    </table>
                    <!-- </div> -->
                </div>
            </div>
            <div class="col-md-12">
                <div class="container mt-3">
                    <h5>Enter Kit records </h5>

                    <form id="bookForm">
                        <div class="form-group">
                            <div class="form-row">
                                <div class="col-12 col-md-6">
                                    <label>Full Name</label>
                                    <!--<input type="text" class="form-control" required id="titleInput">-->
                                    <select class="slim-select" id="titleInput">

                                        <option>Andre Veldskoen</option>
                                        <option>Ieuan Van Kent</option>
                                        <option>Tuli Amakali</option>
                                   
                                    </select>
                                </div>
                                <div class="col-12 col-md-6">
                                    <label>Kit Details</label>
                                    <input type="text" class="form-control" required id="kitdetails">
                                </div>


                            </div>
                        </div>

                        <button type="submit" class="btn btn-lg btn-dark btn-block" id="createBtn">
                            Add player Details

                        </button>
                        <button class="btn btn-lg btn-dark btn-block" type="button" id="createloaderBtn"
                            style="display: none;" disabled>
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                            Loading...
                        </button>
                    </form>
                </div>
            </div>
        </div>


    </section>


    <!-- Modal -->
    <div class="modal fade" id="EditModal" aria-labelledby="EditModal" aria-hidden="true">
        <div class="modal-dialog  modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="EditModal">Edit Player Information </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="editForm">
                        <div class="form-group">
                            <div class="form-row">
                                <div class="col">
                                    <input type="text" class="form-control" placeholder="Full Name" readonly
                                        id="modalName">
                                    <!--<select class="slim-selectEdit" id="modalName">

                                        <option>Andre Veldskoen</option>
                                        <option>Ieuan Van Kent</option>
                                        <option>Tuli Amakali</option>
                                        <option>Pombili Nakaleke</option>
                                        <option>Wilhelm Kandjeke</option>
                                        <option>Gabriel Kamenye</option>
                                        <option>Tjeripo Tjihambuma</option>
                                        <option>Fellipus Negodhi</option>
                                        <option>Progress Masule. S</option>
                                        <option>Romario Arnat</option>
                                        <option>Joaquim Manuel</option>
                                        <option>Hussein Mwakembeu</option>
                                        <option>Tuhafeni Nghipumbwa</option>
                                        <option>Patrick Hagen</option>
                                        <option>Bro-Mathew Niikondo</option>
                                    </select>-->
                                </div>
                                <div class="col">
                                    <input type="text" class="form-control" required id="modalKit">
                                    <!--<input type="date" class="form-control" pattern="dd-mm-yyyy" required id="modalDate">-->
                                </div>
                            </div>
                        </div>
                        <!-- <div class="form-group">
                                      <textarea placeholder="Your Message" class="form-control" name="message" rows="10" required></textarea>
                                    </div> -->
                        <button class="btn btn-lg btn-dark btn-block" data-loading-text="Loading..." id="formEditBtn">
                            Save
                        </button>


                        <button class="btn btn-lg btn-dark btn-block" type="button" id="editloaderBtn"
                            style="display: none;" disabled>
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                            Loading...
                        </button>
                    </form>
                </div>

            </div>
        </div>
    </div>
    <!-- this is the loader/ spinner  -->

    <div class="modal fade" id="ErrorModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">

                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h5>
                        Something went wrong, Please reload the website and try again. if this problem continues please
                        contact
                        the admin
                    </h5>
                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="DeleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">

                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h5>Are you sure you want to delete : </h5>
                    <input class="form-control mb-3" type="text" id="deleteName" disabled />

                    <button class="btn btn-danger btn-block" id="delete">
                        Delete
                    </button>

                    <button class="btn btn-lg btn-danger btn-block" type="button" id="deleteloaderBtn"
                        style="display: none;" disabled>
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                        Loading...
                    </button>
                </div>

            </div>
        </div>
    </div>




    <!-- Footer-->
    <footer class="py-5 bg-dark">
        <div class="container">
            <div class="row">

                <div class="col-md-12">
                    <p class="m-0 text-center text-white">Copyright &copy; Your Website <span id="demo"></span></p>


                </div>



            </div>



        </div>

    </footer>


    <script>
        const d = new Date();
        let year = d.getFullYear();
        document.getElementById("demo").innerHTML = year;
    </script>
    <!-- Bootstrap core JS-->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
        crossorigin="anonymous"></script>

    <!--<script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>-->
    <!--<script src="https://cdn.datatables.net/v/dt/dt-1.13.5/r-2.5.0/datatables.min.js"></script>-->
    <!--This is for the datatable-->

    <script type="text/javascript" src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>


    <script type="text/javascript"
        src="https://cdn.datatables.net/rowreorder/1.3.1/js/dataTables.rowReorder.min.js"></script>

    <script type="text/javascript"
        src="https://cdn.datatables.net/responsive/2.4.0/js/dataTables.responsive.min.js"></script>





    <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-app.js"></script>

    <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
    <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-analytics.js"></script>
    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-firestore.js"></script>

    <!--slim select CDN-->
    <script src="https://unpkg.com/slim-select@latest/dist/slimselect.min.js"></script>

    <!--slim select  -->

    <script>
        //new SlimSelect({
        //    select: '#titleInput'
        //})
        $(".slim-select").each((i, e) => {
            new SlimSelect({
                select: e
            })
        });
        $(".slim-selectEdit").each((i, e) => {
            new SlimSelect({
                select: e
            })
        });
    </script>

    <script src="./JS/Firebase.js"></script>

    <script>


        var Id = "";

        // this works
        const booksRef = firebase.firestore().collection("KitNumbers");
        booksRef.get().then((snapshot) => {
            const data = snapshot.docs.map((doc) => ({
                id: doc.id,
                ...doc.data()
            }));

            $('#example').DataTable({
                data: data,
                "aoColumnDefs": [{ "bVisible": false, "aTargets": [0] }],
                columns: [
                    //hide the second & fourth column
                    // { 'visible': false, 'targets': [0] },
                    { data: 'id' },
                    { data: 'name' },
                    { data: 'date' },
                    {
                        data: null,
                        render: function (data, type, row) {
                            return '<button class="btn btn-warning action-button" data-id="' + data.id + '">Edit</button>';
                        }
                    },
                    {
                        data: null,
                        render: function (data, type, row) {
                            return '<button class="btn btn-danger delete-button" data-id="' + data.id + '">Delete</button>';
                        }
                    }

                ]
            });
        });
        const loader = document.getElementById("spinner");

        // Handle button click event
        $('#example').on('click', '.action-button', function () {
            var id1 = $(this).data('id');


            Id = id1;
            console.log("isja",)
            const booksss = firebase.firestore().collection("KitNumbers");
            booksss.get().then((snapshot) => {

                const data = snapshot.docs.map((doc) => ({
                    id: doc.id,

                    ...doc.data()

                }));
                const specificDoc = data.find((doc) => doc.id === id1);

                if (specificDoc) {


                    const name = specificDoc.name;
                    const date = specificDoc.date;
                    console.log("edit details", date)
                    $('#modalName').val(specificDoc.name);


                    $('#modalKit').val(specificDoc.date);

                } else {
                    console.log("No such document!");
                }



            });

            $('#EditModal').modal('show');


        });

        const editForm = document.getElementById("editForm"); // Replace "bookForm" with your form ID

        editForm.addEventListener("submit", (event) => {
            $('#formEditBtn').button('loading');
            // loader.style.display = "block";

            document.getElementById("editloaderBtn").style.display = "block";
            document.getElementById("formEditBtn").style.display = "none";
            event.preventDefault();

            console.log("it should hide")
            console.log("in the eduit form")

            const booksRefsDD = firebase.firestore().collection("KitNumbers");
            booksRefsDD.get().then((snapshot) => {
                const data = snapshot.docs.map((doc) => ({
                    id: doc.id,
                    ...doc.data(),
                }));

                // Assuming you have retrieved the specific document you want to update
                const specificDoc = data.find((doc) => doc.id === Id);

                if (specificDoc) {
                    // Perform the necessary updates on specificDoc
                    var name1 = document.getElementById("modalName").value;
                    var date2 = document.getElementById("modalKit").value;

                    //const dateParts = date2.split("-");
                    //const formattedDateq = dateParts[2] + "-" + dateParts[1] + "-" + dateParts[0];


                    //console.log("date before submit ", formattedDateq)
                    // Update the document in Firestore
                    booksRef
                        .doc(specificDoc.id)
                        .update({
                            name: name1,
                            date: date2,

                        })
                        .then(() => {
                            console.log("Document successfully updated!");

                            $('#EditModal').modal('hide');

                            window.location.reload();
                        })
                        .catch((error) => {
                            console.error("Error updating document: ", error);

                            $('#ErrorModal').modal('show');
                        });
                } else {
                    console.log("No such document!");
                    $('#ErrorModal').modal('show');
                }
            });


        });


    </script>
    <script src="./JS/delete.js"></script>
    <script src="./JS/add.js"></script>

</body>

</html>